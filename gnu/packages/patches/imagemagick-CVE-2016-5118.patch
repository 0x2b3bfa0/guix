From c0c5c9fc7271fd141531b0bdb55b7f7ff5afc481 Mon Sep 17 00:00:00 2001
From: Leo Famulari <leo@famulari.name>
Date: Tue, 31 May 2016 13:06:10 -0400
Subject: [PATCH] Fix CVE-2016-5118.

This is the temporary fix suggested by upstream:
https://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=29803#p134039
---
 magick/magick-baseconfig.h | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/magick/magick-baseconfig.h b/magick/magick-baseconfig.h
index d320f2a..c9cce82 100644
--- a/magick/magick-baseconfig.h
+++ b/magick/magick-baseconfig.h
@@ -519,7 +519,10 @@
 
 /* Define to 1 if you have the `popen' function. */
 #ifndef MAGICKCORE_HAVE_POPEN
+/* Temporary mitigation for CVE-2016-5118 (popen() shell vulnerability via
+ * filename)
 #define MAGICKCORE_HAVE_POPEN 1
+*/
 #endif
 
 /* Define to 1 if you have the `posix_fadvise' function. */
-- 
2.8.3

